<link rel="stylesheet" href="/css/new-org-add-members/sxn-new-org-add-members.v3.min.css" />
<script>
function search() {
  var input, filter, table, tr, td, i;
  input = document.getElementById("input");
  filter = input.value.toUpperCase();
  table = document.getElementById("users");
  tr = table.getElementsByTagName("li");
  for (i = 0; i < tr.length; i++) {
    p = tr[i].getElementsByTagName("p")[1];
    if (p.innerHTML.toUpperCase().indexOf(filter) > -1) {
      tr[i].style.display = "";
    } else {
      tr[i].style.display = "none";
    }
  }
}
function addMember(index) {
  var username_tag = "username-" + index;
  if(document.getElementById("icon1-" + index).style.display=="") {
    document.getElementById("icon1-" + index).style.display="none";
    document.getElementById("icon2-" + index).style.display="";
    document.getElementById("addMembers").value += document.getElementById(username_tag).innerHTML + ",";
  }
  else {
    document.getElementById("icon1-" + index).style.display="";
    document.getElementById("icon2-" + index).style.display="none";
    document.getElementById("removeMembers").value += document.getElementById(username_tag).innerHTML + ",";
  }
}
function addGroup(index) {
  var group_tag = "group-" + index;
  if(document.getElementById("icon1-group-" + index).style.display=="") {
    document.getElementById("icon1-group-" + index).style.display="none";
    document.getElementById("icon2-group-" + index).style.display="";
    document.getElementById("addGroups").value += document.getElementById(group_tag).innerHTML + ",";
  }
  else {
    document.getElementById("icon1-group-" + index).style.display="";
    document.getElementById("icon2-group-" + index).style.display="none";
    document.getElementById("removeGroups").value += document.getElementById(group_tag).innerHTML + ",";
  }
}
function showAll() {
  $('#user').show();
  $('#group').show();
}
function showUsers() {
  $('#user').show();
  $('#group').hide();
}
function showGroups() {
  $('#user').hide();
  $('#group').show();
}
</script>
<div id="new-org-add-members">
  <form method="post" action="/events/create" id="eventform">
    <input type="text" name="title" value="{{title}}" style="display: none">
    <input type="text" name="description" value="{{description}}" style="display: none">
    <input type="text" name="board" value="{{board}}" style="display: none">
    <input type="text" name="startTime" value="{{startTime}}" style="display: none">
    <input type="text" name="endTime" value="{{endTime}}" style="display: none">
    <input type="text" name="location" value="{{location}}" style="display: none">
    <input type="date" name="date" value="{{date}}" style="display: none">
    <input type="text" name="contact" value="{{contact}}" style="display: none">
    <input type="text" name="postAs" value="{{postAs}}" style="display: none">
    <input type="hidden" name="tags" value="{{tags}}" style="display: none">
    <div class="uk-card uk-card-default uk-card-body">
        <div class="add-members-wrap">
            <ul class="add-members-row-wrap">
                <li class="add-members-row">
                    <div>
                      <input id="input" class="uk-input" type="text" placeholder="Search for users" onkeyup="search()">
                    </div>

                </li>
                <li class="add-members-row">
                    <div>
                        <ul class="uk-subnav uk-subnav-pill" uk-switcher style="top:0px">
                            <li><a onclick="showAll()">All</a></li>
                            <li><a onclick="showUsers()">People</a></li>
                            <li><a onclick="showGroups()">Organizations</a></li>
                        </ul>
                    </div>
                </li>
                <input type="text" id="addMembers" name="addMembers" style="display: none">
                <input type="text" id="removeMembers" name="removeMembers" style="display: none">
                <input type="text" id="addGroups" name="addGroups" style="display: none">
                <input type="text" id="removeGroups" name="removeGroups" style="display: none">
                <li class="add-members-row inner-list-wrap">
                    <div class="inner-list" id="users" style="max-height:400px">
                        <ul>
                          <div style="border-bottom: 1px solid #d1d2d3" id="user">
                          {{#each users}}
                            <li>
                                <div class="member" uk-grid>
                                    <div class="uk-width-auto@m">
                                        <div class="img-wrap one"></div>
                                    </div>
                                    <div class="uk-width-expand@m">
                                      <p id="username-{{@index}}" style="display: none">{{username}}</p>
                                        <p class="name">{{firstName}} {{lastName}}</p>
                                        <p class="major">{{#if classYear}}{{major}}, {{classYear}}{{else}}{{title}}, {{division}}{{/if}}</p>
                                    </div>
                                    <div class="uk-width-auto@m" id="icons">
                                        <div class="invite-icon">
                                            <span onclick="addMember({{@index}})" id="icon1-{{@index}}" class="uk-icon" uk-icon="icon: plus" style="display:"></span>
                                        </div>
                                        <div class="invite-icon green">
                                            <span onclick="addMember({{@index}})" id="icon2-{{@index}}" class="uk-icon" uk-icon="icon: check" style="display:none;"></span>
                                        </div>
                                    </div>
                                </div>
                            </li>
                            {{/each}}
                            </div>
                            <div id="group">
                              {{#each groups}}
                                <li>
                                    <div class="member" uk-grid>
                                        <div class="uk-width-auto@m">
                                            <div class="img-wrap one"></div>
                                        </div>
                                        <div class="uk-width-expand@m">
                                          <p id="group-{{@index}}" style="display: none">{{_id}}</p>
                                            <p class="name">{{name}}</p>
                                            <p class="major">{{description}}</p>
                                        </div>
                                        <div class="uk-width-auto@m" id="icons">
                                            <div class="invite-icon">
                                                <span onclick="addGroup({{@index}})" id="icon1-group-{{@index}}" class="uk-icon" uk-icon="icon: plus" style="display:"></span>
                                            </div>
                                            <div class="invite-icon green">
                                                <span onclick="addGroup({{@index}})" id="icon2-group-{{@index}}" class="uk-icon" uk-icon="icon: check" style="display:none;"></span>
                                            </div>
                                        </div>
                                    </div>
                                </li>
                                {{/each}}
                            </div>
                        </ul>

                    </div>
                </li>
                <li class="add-members-row">
                    <a class="uk-button uk-button-primary" onclick="document.getElementById('eventform').submit()" type="button">Create</a>
                    <a class="uk-button uk-button-cancel" onclick="javascript:history.back()" type="button">Back</a>
                </li>
            </ul>
        </div>
</form>
    </div>
</div>
