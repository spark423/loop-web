<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.1.3/semantic.min.css">
<link rel="stylesheet" href="/css/login.v5.min.css"/>
<script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.1.3/semantic.min.js"></script>
<script>

$(function(){
  $('.ui.dropdown').dropdown();
});

function addAnother(i) {
  $("#addUsers").append('<div id="newUser-' + i + '"><div style="padding: 10px 0px"><span uk-icon="icon: close" onclick="removeUser(' + i + ')"></span><div class="uk-margin" style="display:inline; padding: 10px 10px"><input style="padding: 0 15px;" class="uk-input uk-form-width-medium" type="" name="email" placeholder="Email" required></div><div class="uk-margin" style="display: inline"><select style="padding: 0 15px;" class="uk-select" name="permission" onchange="getval(this, ' + i + ');"><option value="">Select the permission level</option><option value="student">Student</option><option value="admin">Administrator</option><option value="outside">Community Organization</option><option value="custom">Custom</option></select></div></div>');
  $("#addUsers").append('<table style="margin-left:auto; margin-right:auto;border-spacing: 15px; border-collapse: separate; display:none" id="permission-' + i + '"><tr style="padding: 10px"><th>Block from Posting to Board</th><th>Block from Viewing a Board</th><th>Block from Posting to an Organization</th><th>Block from Viewing to an Organization</th></tr><tr style="padding: 10px"><th><div class="ui fluid multiple search selection dropdown" style="width:20vw"><input name="postBlockedBoards" type="hidden"><i class="dropdown icon"></i><div class="default text">Add Restricted Boards</div><div class="menu">{{#each boards}}<div class="item" data-value="{{_id}}">{{name}}</div>{{/each}}</div></div></th><th><div class="ui fluid multiple search selection dropdown" style="width:20vw"><input name="viewBlockedBoards" type="hidden"><i class="dropdown icon"></i><div class="default text">Add Restricted Boards</div><div class="menu">{{#each boards}}<div class="item" data-value="{{_id}}">{{name}}</div>{{/each}}</div></div></th><th><div class="ui fluid multiple search selection dropdown" style="width:20vw"><input name="postBlockedGroups" type="hidden"><i class="dropdown icon"></i><div class="default text">Add Restricted Organizations</div><div class="menu">{{#each groups}}<div class="item" data-value="{{_id}}">{{name}}</div>{{/each}}</div></div></th><th><div class="ui fluid multiple search selection dropdown" style="width:20vw"><input name="viewBlockedGroupus" type="hidden"><i class="dropdown icon"></i><div class="default text">Add Restricted Organizations</div><div class="menu">{{#each groups}}<div class="item" data-value="{{_id}}">{{name}}</div>{{/each}}</div></div></th></tr></table></div>');
  $('.ui.dropdown').dropdown();
  document.getElementById("addAnother").setAttribute( "onClick", "javascript: addAnother(" + (i+1) + ");");
}

function getval(sel, i) {
  if(sel.value=="custom") {
    document.getElementById('permission-' + i).style.display = "";
  } else {
    document.getElementById('permission-' + i).style.display = "none";
  }
}

function removeUser(i) {
  var user = document.getElementById('newUser-' + i);
  user.parentNode.removeChild(user);
}
</script>

<section id="login">
    <div class="login-header">
        <img class="uk-float-left" src="/img/loop_logo_white.png" alt="Loop" />
    </div>


    <h1>Invite users to Loop</h1>
    <p>Enter their emails and permission settings:</p>
    <form action="/invite-users" method="post" id="register">

    <div id="addUsers">
    <div id="newUser-0">
    <div style="padding: 10px 0px">
      <span uk-icon="icon: close" onclick="removeUser(0)"></span>
    <div class="uk-margin" style="display:inline; padding: 10px 10px">
        <input style="padding: 0 15px;" class="uk-input uk-form-width-medium" type="" name="email" placeholder="Email" required>
    </div>

    <div class="uk-margin" style="display: inline">
        <select style="padding: 0 15px;" class="uk-select" name="permission" onchange="getval(this, 0);">
            <option value="">Select the permission level</option>
            <option value="student">Student</option>
            <option value="admin">Administrator</option>
            <option value="outside">Community Organization</option>
            <option value="custom">Custom</option>
        </select>
    </div>
  </div>
    <table style="margin-left:auto; margin-right:auto;border-spacing: 15px; border-collapse: separate; display:none" id="permission-0">
      <tr style="padding: 10px">
        <th>Block from Posting to Board</th>
        <th>Block from Viewing a Board</th>
        <th>Block from Posting to an Organization</th>
        <th>Block from Viewing to an Organization</th>
      </tr>
      <tr style="padding: 10px">
        <th>
              <div class="ui fluid multiple search selection dropdown" style="width:20vw">
                <input name="postBlockedBoards" type="hidden">
                <i class="dropdown icon"></i>
                <div class="default text">Add Restricted Boards</div>
                <div class="menu">
                  {{#each boards}}
                  <div class="item" data-value="{{_id}}">{{name}}</div>
                  {{/each}}
                </div>
              </div>
        </th>
        <th>
          <div class="ui fluid multiple search selection dropdown" style="width:20vw">
            <input name="viewBlockedBoards" type="hidden">
            <i class="dropdown icon"></i>
            <div class="default text">Add Restricted Boards</div>
            <div class="menu">
              {{#each boards}}
              <div class="item" data-value="{{_id}}">{{name}}</div>
              {{/each}}
            </div>
          </div>
        </th>
        <th>
          <div class="ui fluid multiple search selection dropdown" style="width:20vw">
            <input name="postBlockedGroups" type="hidden">
            <i class="dropdown icon"></i>
            <div class="default text">Add Restricted Organizations</div>
            <div class="menu">
              {{#each groups}}
              <div class="item" data-value="{{_id}}">{{name}}</div>
              {{/each}}
            </div>
          </div>
        </th>
        <th>
          <div class="ui fluid multiple search selection dropdown" style="width:20vw">
            <input name="viewBlockedGroups" type="hidden">
            <i class="dropdown icon"></i>
            <div class="default text">Add Restricted Organizations</div>
            <div class="menu">
              {{#each groups}}
              <div class="item" data-value="{{_id}}">{{name}}</div>
              {{/each}}
            </div>
          </div>
        </th>
      </tr>
    </table>
  </div>
</div>
<br>
  <a onclick="addAnother(1)" style="font-size:20px; color: white" id="addAnother">+ Add another user</a>
<br></br>
    <div class="inputs">

            <a type="button" class="uk-button uk-button-default" onclick="document.getElementById('submitbutton').click();">
                Add
            </a>
            <input type="submit" style="display: none" id="submitbutton"></input>
            <a href="/add-tags" class="uk-button uk-button-secondary">
                Skip
            </a>
    </div>
  </form>

</div>
